/* =======================================================================================
   Rhapsody Â· Global Background & Corner Badgesï¼ˆå†™ä½œé¡µå…¨å±€åº•è‰² + è§’æ ‡ç³»ç»Ÿï¼‰
   è®¾è®¡ç†å¿µ / Design Concept
   - ä»…å½“ã€Œ#write å­˜åœ¨ä¸”æœªæ‰“å¼€ MegaMenuã€æ—¶ä¸º html/body èµ‹äºˆå…¨å±€åº•è‰²ä¸æ–‡å­—è‰²ã€‚
   - è§’æ ‡é‡‡ç”¨â€œå˜é‡åˆ‡æ¢ + å•ä¸€æ¸²æŸ“å£â€æ–¹æ¡ˆï¼šhtml::after=BLï¼Œhtml::before=BRï¼›ä¸æ”¹ DOMã€‚
   - è§’æ ‡é»˜è®¤å…³é—­ï¼›é€šè¿‡ :has(...) æ”¹å†™å˜é‡å¯ç”¨ï¼Œcontent: none/"" ç²¾å‡†æ§ç”Ÿ/ä¸ç”Ÿä¼ªå…ƒç´ ã€‚
   - å°ºå¯¸ä¸ä½ç½®ä¸€æ¬¡é…ç½®ï¼š--cb-size=clamp(72px,max(88px,7vmin),112px)ï¼›è€ƒè™‘ safe-areaã€‚
   - BR å‚ç›´ä½ç§»éšè§†å£è‡ªé€‚åº”ï¼ˆ10pxâ€“min(420px, 100vhâˆ’sizeâˆ’safe-areaâˆ’8px)ï¼‰ä»¥é¿å…é®æŒ¡ã€‚
   - ä¿æŒä½ æ—¢å®šçš„é¢œè‰²/å°ºå¯¸/æ•°å€¼ä¸åŒºåŸŸå†…å˜é‡ä½œç”¨åŸŸï¼Œä¸è·¨åŒºæ±¡æŸ“ã€‚
   ======================================================================================= */

/* ========================================================================== */
/* REGION A â€” GLOBAL ROOT Â· Background & Text                                 */
/* Scope: ä»…åœ¨ #write å­˜åœ¨ã€ä¸” MegaMenu å…³é—­æ—¶ä¸º html/body è®¾å®šåº•è‰²ä¸æ­£æ–‡è‰²     */
/* Function: æä¾›ç¼–è¾‘æ€å…¨å±€åº•è‰²ã€æ–‡å­—è‰²ã€SVG éšæ–‡å­—ç€è‰²ã€åŸºç¡€è¡Œé«˜               */
/* Adjustable Params: èƒŒæ™¯/æ–‡å­—/è¡Œé«˜ï¼ˆè¿™é‡Œä¿ç•™ä½ çš„æ—¢å®šæ•°å€¼ï¼‰                   */
/* å…¼å®¹æ€§ / Compatibility: å¯åŒ…è£¹ @supports(selector(:has(*)))ï¼›Typora å¯ç”¨    */
/* ========================================================================== */

/* é»˜è®¤ï¼šå†™ä½œæ€å¯ç”¨ */
body:not(.megamenu-opened) {
  --bg-color:   #d5eafd;     /* èƒŒæ™¯è‰² / Background */
  --text-color: #232931;     /* æ­£æ–‡å­—è‰² / Body text */
  --svg-fill:   currentColor;/* SVG/å›¾æ ‡é¢œè‰²éšæ–‡å­—è‰² */
  --line-height:1.625rem;    /* åŸºç¡€è¡Œé«˜ */

  /* ğŸ“± ç§»åŠ¨ç«¯è‡ªåŠ¨æ–‡å­—ç¼©æ”¾ï¼ˆæ¡Œé¢ç«¯åŸºæœ¬æ— æ•ˆï¼Œä½œä¸ºå…¼å®¹ä½ä¿ç•™ï¼‰ */
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;

  background: var(--bg-color);
  color: var(--text-color);
  fill: var(--svg-fill);
  line-height: var(--line-height);
}

/* ========================================================================== */
/* REGION B â€” CORNER BADGES (BL & BR) Â· å˜é‡åˆ‡æ¢ç‰ˆï¼ˆå•ç›‘å¬ã€å•æ¸²æŸ“å£ï¼‰        */
/* çº¦å®šï¼šBL=å·¦ä¸‹ï¼ˆ::afterï¼‰ï¼ŒBR=å³ä¸‹ï¼ˆ::beforeï¼‰                              */
/* é»˜è®¤å…³é—­è§’æ ‡ï¼›ä»…åœ¨ html ä¸Šç”¨ :has æ”¹å˜é‡ï¼›æœªå‘½ä¸­æ—¶ content:none ä¸ç”Ÿæˆä¼ªå…ƒç´  */
/* ========================================================================== */
/* â”€â”€ å…¨å±€å‡ ä½•ï¼šé›†ä¸­å®šä¹‰å°ºå¯¸/å®‰å…¨åŒº/åç§»ï¼ˆä¸åšçŠ¶æ€åˆ‡æ¢ï¼‰ â”€â”€ */
html{
  /* å°ºå¯¸ï¼ˆé¦–é€‰ 88pxï¼›éšè§†å£è½»å¾®ä¼¸ç¼©ï¼Œ72â€“112pxï¼‰ */
  --cb-size: clamp(72px, max(88px, 7vmin), 112px);

  /* å®‰å…¨åŒºï¼ˆåº•éƒ¨åˆ˜æµ· / ç³»ç»Ÿæ ï¼‰ */
  --cb-safe-bottom: env(safe-area-inset-bottom, 0px);

  /* å·¦ä¸‹è§’åç§»ï¼ˆé¦–é€‰ 20/10ï¼›é€‚åº¦éšè§†å£ä¼¸ç¼©ï¼‰ */
  --cb-bl-x: clamp(12px, max(20px, 1.8vmin), 28px);
  --cb-bl-y: clamp(8px,  max(10px, 1.6vmin), 20px);

  /* å³ä¸‹è§’åç§» Xï¼ˆé¦–é€‰ 20ï¼›é€‚åº¦éšè§†å£ä¼¸ç¼©ï¼‰ */
  --cb-br-x: clamp(12px, max(20px, 1.8vmin), 28px);

  /* å³ä¸‹è§’åç§» Yï¼šä¸åŸç‰ˆä¸€è‡´ */
  --cb-br-y-max: min(420px, calc(100vh - var(--cb-size) - var(--cb-safe-bottom) - 8px));
  --cb-br-y: clamp(10px, 350px, var(--cb-br-y-max));
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* BLï¼ˆå·¦ä¸‹ï¼‰ï¼šOutline / MegaMenuï¼ˆå°±åœ°æŒ‚è½½ï¼Œfixed å®šä½åˆ°è§†å£ï¼‰                */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

/* Outline æ¿€æ´» â†’ ä½œä¸šåŸ¹æ ¹ï¼ˆæŒ‚è½½ç‚¹ï¼šä¾§æ æœ¬ä½“ï¼‰ */
#typora-sidebar.active-tab-outline::after{
  content: "";
  position: fixed;
  left:  var(--cb-bl-x);
  bottom: calc(var(--cb-bl-y) + var(--cb-safe-bottom));
  width:  var(--cb-size);
  height: var(--cb-size);
  background: url("../Logo/Background_Icon/Typoraä½œä¸šåŸ¹æ ¹.ico") no-repeat center / contain;
  pointer-events: none;
  z-index: 900;
}

/* MegaMenu æ‰“å¼€ â†’ å†’é™©åŸ¹æ ¹ï¼ˆæŒ‚è½½ç‚¹ï¼šhtmlï¼›è¦†ç›– Outlineï¼‰ */
body.megamenu-opened::after{
  content: "";
  position: fixed;
  left:  var(--cb-bl-x);
  bottom: calc(var(--cb-bl-y) + var(--cb-safe-bottom));
  width:  var(--cb-size);
  height: var(--cb-size);
  background: url("../Logo/Background_Icon/å†’é™©åŸ¹æ ¹.ico") no-repeat center / contain;
  pointer-events: none;
  z-index: 901; /* è¦†ç›–ä¾§æ æŒ‚è½½çš„ 900 */
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
/* BRï¼ˆå³ä¸‹ï¼‰ï¼šFiles åˆ—è¡¨ / æ ‘å½¢ï¼ˆå°±åœ°æŒ‚è½½ï¼Œfixed å®šä½åˆ°è§†å£ï¼‰                  */
/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

/* Files + åˆ—è¡¨æ¨¡å¼ â†’ å¨å¸ˆåŸ¹æ ¹ */
html:has(#typora-sidebar.active-tab-files.use-file-list-style):not(:has(.megamenu-opened)){
  --cb-br-content: "";
  --cb-br-icon: url("../Logo/Background_Icon/å¨å¸ˆåŸ¹æ ¹.ico");
}

/* Files + æ ‘å½¢æ¨¡å¼ â†’ ç¡è§‰åŸ¹æ ¹ */
html:has(#typora-sidebar.active-tab-files.use-file-tree-style):not(:has(.megamenu-opened)){
  --cb-br-content: "";
  --cb-br-icon: url("../Logo/Background_Icon/ç¡è§‰åŸ¹æ ¹.ico");
}

/* å•ä¸€æ¸²æŸ“å£ï¼šBR æŒ‚åœ¨ html::before */
html::before{
  content: var(--cb-br-content);
  position: fixed;
  right: var(--cb-br-x);
  bottom: calc(var(--cb-br-y) + var(--cb-safe-bottom));
  width:  var(--cb-size);
  height: var(--cb-size);
  background: var(--cb-br-icon) no-repeat center / contain;
  pointer-events: none;
  z-index: 900;
}

/* ==========================================================================
   REGION C â€” VIEWPORT SCROLLBAR Â· Ultra-Minimal Pink
   Scope: ä»…å‘½ä¸­ä¸»ç•Œé¢æ»šåŠ¨æ¡ï¼ˆcontent, html, bodyï¼‰
   - ä¸å½±å“ä¾§æ ã€èœå•ã€è¡¨æ ¼/ä»£ç ç­‰å†…åµŒæ»šåŠ¨å®¹å™¨
   - æ— åŠ¨ç”»ã€æ— æ»¤é•œã€æ— å‘å…‰ï¼›ä»…ç²‰è‰²æ‹‡æŒ‡+æµ…ç°è½¨é“
   ========================================================================== */
/* REGION C â€” VIEWPORT SCROLLBAR Â· Root (content-only) */
content{
  --vp-size:   12px;
  --vp-radius: 12px;
  --track:     rgba(0,0,0,.06);
  --thumb:     #F3B8CC;
  --thumb-brd: #E6A1BB;
}

/* å°ºå¯¸ï¼ˆä»…ä¸»è§†å£ contentï¼‰ */
content::-webkit-scrollbar{
  width:  var(--vp-size);
  height: var(--vp-size);
}

/* è½¨é“ï¼ˆä»…ä¸»è§†å£ contentï¼‰ */
content::-webkit-scrollbar-track{
  background:    var(--track);
  border-radius: var(--vp-radius);
}

/* æ‹‡æŒ‡ï¼ˆä»…ä¸»è§†å£ contentï¼‰ */
content::-webkit-scrollbar-thumb{
  background:    var(--thumb);
  border:        1px solid var(--thumb-brd);
  border-radius: var(--vp-radius);
}

/* è§’è½ï¼ˆä»…ä¸»è§†å£ contentï¼‰ */
content::-webkit-scrollbar-corner{ background: transparent; }
  

/* ========================================================================== */
/* REGION D â€” TITLEBAR CONTROLS (Left + Right) Â· Ceramic White Ã— Cyan Edge    */
/* Scope: å†™ä½œæ€é»˜è®¤ï¼ˆæœªæ‰“å¼€ MegaMenuï¼‰ï¼›ç»Ÿä¸€ç®¡ç† #top-titlebar å†…æ‰€æœ‰æŒ‰é’®        */
/* Targets: #w-menu-btn, #w-min, #w-max, #w-full, #w-pin, #w-unpin,            */
/*          #w-restore, #w-close                                              */
/* Notes: 1) å»æ‰ :has(#write) é™ä½åŒ¹é…æˆæœ¬ï¼›                                    */
/*        2) å˜é‡ä»…åœ¨ body:not(.megamenu-opened) ä¸‹æŒ‚åˆ° #top-titlebarï¼›         */
/*        3) ç”¨ :where() èšåˆ IDï¼Œé™ä½ç‰¹æŒ‡åº¦ï¼Œä¾¿äºçƒ­ä¿®ï¼›                         */
/* ========================================================================== */

/* â€”â€” å˜é‡ï¼šä»…å½“æœªæ‰“å¼€ MegaMenu æ—¶ç”Ÿæ•ˆ â€”â€” */
body:not(.megamenu-opened) #top-titlebar{
  --wc-size: 24px;
  --wc-radius: 8px;
  --wc-fg: #333333;

  --wc-ceramic-1: #F6F8FC;
  --wc-ceramic-2: #E7EDF7;
  --wc-hairline: rgba(211,220,235,.85);
  --wc-glint: rgba(255,255,255,.80);
  --wc-shadow: rgba(0,0,0,.22);

  --wc-cyan-glow: rgba(153,229,255,.45);

  --wc-danger-1: #FFF2F2;
  --wc-danger-2: #FFE2E2;
  --wc-danger-ring: rgba(255,77,79,.45);
  --wc-danger-glow: rgba(255,77,79,.28);
}

/* â€”â€” åŸºç¡€å½¢æ€ï¼šç»Ÿä¸€å·¦/å³æŒ‰é’®çš„å¡ç‰‡å®¹å™¨ â€”â€” */
body:not(.megamenu-opened) #top-titlebar
  :where(#w-menu-btn,#w-min,#w-max,#w-full,#w-pin,#w-unpin,#w-restore,#w-close).toolbar-icon{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  box-sizing: border-box;
  height: var(--wc-size);
  padding: 2px 8px;
  border: 1px solid var(--wc-hairline);
  border-radius: var(--wc-radius);
  background: linear-gradient(180deg,var(--wc-ceramic-1),var(--wc-ceramic-2));
  box-shadow:
    inset 0 1px 0 var(--wc-glint),
    inset 0 -1px 0 var(--wc-shadow),
    0 0 0 1px rgba(255,255,255,.10);
  color: var(--wc-fg);
  fill: currentColor;
  transition: background .18s ease, box-shadow .18s ease, filter .16s ease;
}

/* â€”â€” å¾®è°ƒè·ç¦»ï¼šå·¦/å³å„è‡ªå¤–è¾¹è·ï¼ˆé¿å…å†™ä¸¤éè§„åˆ™ï¼‰ â€”â€” */
body:not(.megamenu-opened) #top-titlebar #w-menu-btn.toolbar-icon{ margin-right: 6px; }
body:not(.megamenu-opened) #top-titlebar
  :where(#w-min,#w-max,#w-full,#w-pin,#w-unpin,#w-restore,#w-close).toolbar-icon{ margin-left: 6px; }

/* â€”â€” Hoverï¼šé’è“æŒ‡ç¤ºç¯ï¼ˆClose ä¾‹å¤–è§ä¸‹ï¼‰ â€”â€” */
@media (hover:hover){
  body:not(.megamenu-opened) #top-titlebar
    :where(#w-menu-btn,#w-min,#w-max,#w-full,#w-pin,#w-unpin,#w-restore).toolbar-icon:hover{
    filter: brightness(1.02) saturate(1.04);
    box-shadow:
      inset 0 1px 0 var(--wc-glint),
      inset 0 -1px 0 rgba(0,0,0,.26),
      0 0 0 1px rgba(255,255,255,.12),
      0 0 12px var(--wc-cyan-glow);
  }
}

/* â€”â€” Activeï¼šè½»å‹åé¦ˆ â€”â€” */
body:not(.megamenu-opened) #top-titlebar
  :where(#w-menu-btn,#w-min,#w-max,#w-full,#w-pin,#w-unpin,#w-restore,#w-close).toolbar-icon:active{
  filter: brightness(.97) saturate(1.02);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.65),
    inset 0 -1px 0 rgba(0,0,0,.35),
    0 0 0 1px rgba(255,255,255,.12);
}

/* â€”â€” Closeï¼šhover ç”¨æ·¡çº¢å®‰å…¨æ€ â€”â€” */
@media (hover:hover){
  body:not(.megamenu-opened) #top-titlebar #w-close.toolbar-icon:hover{
    background: linear-gradient(180deg,var(--wc-danger-1),var(--wc-danger-2));
    box-shadow:
      inset 0 1px 0 var(--wc-glint),
      inset 0 -1px 0 rgba(0,0,0,.22),
      0 0 0 1px var(--wc-danger-ring),
      0 0 12px var(--wc-danger-glow);
    color: #a11217;
  }
}

/* â€”â€” å·¦ä¾§æ±‰å ¡æŒ‰é’®çš„ä¸‰çº¿å›¾å½¢ â€”â€” */
#top-titlebar #w-titlebar-left #w-menu-btn .ty-menu-btn-area{
  display: inline-grid;
  grid-auto-flow: row;
  grid-template-rows: repeat(3, 2px);
  gap: 3px;
  width: 14px;
}
#top-titlebar #w-titlebar-left #w-menu-btn .ty-menu-btn-area-sub{
  display: block;
  height: 2px;
  border-radius: 2px;
  background: linear-gradient(180deg,#556b82,#344a5f);
}

/* â€”â€” æ±‰å ¡æ‰«æï¼šä»… hover æ—¶å¯ç”¨ã€å‡å°‘æ— è°“åŠ¨ç”» â€”â€” */
@media (hover:hover){
  body:not(.megamenu-opened) #top-titlebar #w-titlebar-left #w-menu-btn.toolbar-icon:hover
  .ty-menu-btn-area-sub{
    background-image:
      linear-gradient(180deg,#556b82,#344a5f),
      linear-gradient(90deg, rgba(122,215,255,0) 35%, rgba(122,215,255,.7) 50%, rgba(122,215,255,0) 65%);
    background-size: 100% 100%, 300% 100%;
    background-position: 50% 50%, -120% 0%;
    animation: aiMenuScanX 2.6s linear infinite;
  }
}

/* â€”â€” å‡å°‘åŠ¨æ€ï¼šç³»ç»Ÿå±‚é¢åœæ‰åŠ¨ç”» â€”â€” */
@media (prefers-reduced-motion: reduce){
  #top-titlebar #w-titlebar-left #w-menu-btn .ty-menu-btn-area-sub{
    animation: none !important;
    background-position: 50% 50%;
  }
}

/* â€”â€” å…³é”®å¸§ â€”â€” */
@keyframes aiMenuScanX{
  0%   { background-position: 50% 50%, -120% 0%; }
  100% { background-position: 50% 50%, 160% 0%;  }
}

/* =============================== END OF PACKAGE ============================ */
